---
title: "Data"
format:
  html:
    code-overflow: wrap
    embed-resources: true
    self-contained-math: true
---


## What is National Syndromic Surveillance Program (NSSP) data?

National Syndromic Surveillance Program (NSSP) data are collected by the U.S. Centers for Disease Control and Prevention, in collaboration with local and state health departments and private sector partners. NSSP data include surveillance data tracking the percentage of emergency department (ED) visits due to influenza-like illness, including influenza, COVID-19, and RSV. NSSP data reporting of ED visits due to influenza-like illness began in late 2022. Data are available on a weekly time scale, with data from the prior week added Friday mornings. 

## What sub-state-level data are available?

At the sub-state level, reporting facilities can be aggregated to the level of health service area (HSA). HSAs are single- or multi-county clusters that correspond with healthcare-seeking patterns. All publicly-available county-level NSSP data are really HSA values, such that each county in the HSA will have the same value as the parent HSA. 

A list of HSAs can be downloaded [here](https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fraw.githubusercontent.com%2Fmmkerr%2Fdraft%2Frefs%2Fheads%2Fmain%2FHealth.Service.Areas.xls&wdOrigin=BROWSELINK).

NSSP surveillance data at the HSA level can be [downloaded from the CDC](https://data.cdc.gov/Public-Health-Surveillance/NSSP-Emergency-Department-Visit-Trajectories-by-St/rdmq-nq56/about_data). 

## Missingness

There is substantial missingness at the county level, especially for rural and lower-population locations.

Missingness has varied a bit since reporting began in late 2022. As of January 2025, NSSP does not report any data at the county level for the following states: Alaska, Alabama, Arkansas, Arizona, California, Florida, Missouri, North Dakota, New Hampshire, Ohio, Pennsylvania, Rhode Island, South Dakota, and Washington. 

Of these, no county-level data is available since reporting began for Alaska, Alabama, Arkansas, Arizona, California, Florida, Missouri, North Dakota, New Hampshire, Ohio, South Dakota, and Washington. 

**We are open to working with public health partners from jurisdictions with no reported NSSP county-level data if they are able to facilitate access to an alternative source of sub-state-level data.**

## Accessing NSSP data

NSSP data can be accessed through the [epidata API](https://cmu-delphi.github.io/delphi-epidata/api/covidcast-signals/nssp.html) using `epidatr` (recommended) and `covidcast` R packages.

A vignette for using `epidatr` is available on [CRAN](https://cran.r-project.org/web/packages/epidatr/vignettes/epidatr.html).

```r
library(epidatr)
library(covidcast)
```

Although the recommended way to pull data is with `epidatr`, we start by illustrating county-level data using the `covidcast` package's plotting functionality. The following plot shows reporting counties as of Jan. 12, 2025. Recall all counties in an HSA will have the same value as the parent HSA. 

```r
nssp_county <- covidcast::covidcast_signal("nssp", "pct_ed_visits_influenza",
                                geo_type = "county",
                                time_type = "week")
```
```r
plot(nssp_county, time_value = "2025-01-12")
```

![](img/nsspplot.png){width=70%}

The following code uses the `epidatr` package to return county-level data, where `geo_value` is the FIPS code of the county. Again, the values returned for an individual county are really those of the parent HSA.

```r
epidatr::pub_covidcast(source = "nssp", signals = "pct_ed_visits_influenza", geo_type = "county", geo_values = "25015", time_type = "week")
```
![](img/nssptable.png){width=100%}

## Why use NSSP HSA data?

Metro-level disease trends and forecasts may differ markedly from state and national trends. Building the capacity to forecast at the metro-level may be crucial in times of outbreak planning and response.  

NSSP HSA-level data are **publicly available**, making it quicker and easier to expand forecasting efforts to additional jurisdictions that report these data. 

A more detailed visual breakdown of HSAs for each state can be found [here](https://raw.githubusercontent.com/mmkerr/draft/main/all_states_faceted.pdf). This document also provides line plots for each state illustrating the difference between the percentage of ED visits for the state (grey line) vs. each individual HSA in that state (orange line).

## Information for Modelers

The [latest-data.csv file in the Flu MetroCast Hub repository](https://github.com/reichlab/flu-metrocast/blob/main/target-data/latest-data.csv) provides data that modelers can use to fit a model. Latest-data is specially formatted target data that includes the most up-to-date values for all dates for which target data is available, not just dates corresponding to the subset of target_end_dates for which the Hub provides forecasts.

Latest-data is the best source for modelers to get a single version of the target data with only the most recent observations, and including all historical data available from past seasons.



